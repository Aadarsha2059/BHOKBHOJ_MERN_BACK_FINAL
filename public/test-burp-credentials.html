<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burp Suite Credentials Test - BHOKBHOJ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #14b8a6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background: #0d9488;
        }
        .response {
            margin-top: 15px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 4px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        h2 {
            color: #14b8a6;
            border-bottom: 2px solid #14b8a6;
            padding-bottom: 10px;
        }
        .instructions {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üîç Burp Suite Credentials Test Page</h1>
    <p><strong>Use this page to test if Burp Suite is capturing POST requests with credentials.</strong></p>
    
    <div class="instructions">
        <h3>üìã Instructions:</h3>
        <ol>
            <li>Open <strong>Burp Suite Pro</strong></li>
            <li>Go to <strong>Proxy ‚Üí HTTP history</strong> (NOT Intercept)</li>
            <li>Click any test button below</li>
            <li>In HTTP history, <strong>filter by Method: POST</strong></li>
            <li>Click on the POST request ‚Üí <strong>Request</strong> tab ‚Üí See credentials</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>1. Test Login (POST with credentials)</h2>
        <input type="text" id="loginUser" placeholder="Username" value="testuser">
        <input type="password" id="loginPass" placeholder="Password" value="test123">
        <button onclick="testLogin()">Test Login (POST)</button>
        <div id="loginResp" class="response"></div>
    </div>

    <div class="test-section">
        <h2>2. Test Registration (POST with credentials)</h2>
        <input type="text" id="regUser" placeholder="Username" value="newuser">
        <input type="email" id="regEmail" placeholder="Email" value="newuser@test.com">
        <input type="password" id="regPass" placeholder="Password" value="password123">
        <button onclick="testRegister()">Test Registration (POST)</button>
        <div id="regResp" class="response"></div>
    </div>

    <div class="test-section">
        <h2>3. Test OTP Verification (POST with OTP)</h2>
        <input type="text" id="otpUserId" placeholder="User ID" value="test123">
        <input type="text" id="otpCode" placeholder="OTP Code" value="123456">
        <button onclick="testOTP()">Test OTP Verification (POST)</button>
        <div id="otpResp" class="response"></div>
    </div>

    <div class="test-section">
        <h2>4. Test Add to Cart (POST with product data)</h2>
        <input type="text" id="cartProductId" placeholder="Product ID" value="674eff48">
        <input type="number" id="cartQuantity" placeholder="Quantity" value="2">
        <input type="text" id="cartToken" placeholder="Auth Token (optional)">
        <button onclick="testAddToCart()">Test Add to Cart (POST)</button>
        <div id="cartResp" class="response"></div>
    </div>

    <div class="test-section">
        <h2>5. Test Checkout (POST with order data)</h2>
        <input type="text" id="checkoutPayment" placeholder="Payment Method" value="cash">
        <input type="text" id="checkoutToken" placeholder="Auth Token (optional)">
        <button onclick="testCheckout()">Test Checkout (POST)</button>
        <div id="checkoutResp" class="response"></div>
    </div>

    <div class="test-section">
        <h2>6. Test Update Profile (PUT with profile data)</h2>
        <input type="text" id="profileFullname" placeholder="Full Name" value="Test User">
        <input type="text" id="profilePhone" placeholder="Phone" value="1234567890">
        <input type="text" id="profileToken" placeholder="Auth Token (optional)">
        <button onclick="testUpdateProfile()">Test Update Profile (PUT)</button>
        <div id="profileResp" class="response"></div>
    </div>

    <script>
        const API_BASE = 'http://localhost:5050/api';

        function showResponse(elementId, data, isError = false) {
            const element = document.getElementById(elementId);
            element.textContent = JSON.stringify(data, null, 2);
            element.className = 'response ' + (isError ? 'error' : 'success');
        }

        async function testLogin() {
            try {
                const response = await fetch(`${API_BASE}/auth/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Origin': 'http://localhost:5173'
                    },
                    body: JSON.stringify({
                        username: document.getElementById('loginUser').value,
                        password: document.getElementById('loginPass').value
                    })
                });
                const data = await response.json();
                showResponse('loginResp', {
                    status: response.status,
                    message: '‚úÖ Check Burp Suite HTTP history for POST /api/auth/login',
                    data: data
                });
            } catch (error) {
                showResponse('loginResp', { error: error.message }, true);
            }
        }

        async function testRegister() {
            try {
                const response = await fetch(`${API_BASE}/auth/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Origin': 'http://localhost:5173'
                    },
                    body: JSON.stringify({
                        username: document.getElementById('regUser').value,
                        email: document.getElementById('regEmail').value,
                        password: document.getElementById('regPass').value
                    })
                });
                const data = await response.json();
                showResponse('regResp', {
                    status: response.status,
                    message: '‚úÖ Check Burp Suite HTTP history for POST /api/auth/register',
                    data: data
                });
            } catch (error) {
                showResponse('regResp', { error: error.message }, true);
            }
        }

        async function testOTP() {
            try {
                const response = await fetch(`${API_BASE}/auth/verify-otp`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Origin': 'http://localhost:5173'
                    },
                    body: JSON.stringify({
                        userId: document.getElementById('otpUserId').value,
                        otp: document.getElementById('otpCode').value
                    })
                });
                const data = await response.json();
                showResponse('otpResp', {
                    status: response.status,
                    message: '‚úÖ Check Burp Suite HTTP history for POST /api/auth/verify-otp',
                    data: data
                });
            } catch (error) {
                showResponse('otpResp', { error: error.message }, true);
            }
        }

        async function testAddToCart() {
            try {
                const token = document.getElementById('cartToken').value;
                const headers = {
                    'Content-Type': 'application/json',
                    'Origin': 'http://localhost:5173'
                };
                if (token) {
                    headers['Authorization'] = `Bearer ${token}`;
                }
                
                const response = await fetch(`${API_BASE}/cart/add`, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify({
                        productId: document.getElementById('cartProductId').value,
                        quantity: parseInt(document.getElementById('cartQuantity').value)
                    })
                });
                const data = await response.json();
                showResponse('cartResp', {
                    status: response.status,
                    message: '‚úÖ Check Burp Suite HTTP history for POST /api/cart/add',
                    data: data
                });
            } catch (error) {
                showResponse('cartResp', { error: error.message }, true);
            }
        }

        async function testCheckout() {
            try {
                const token = document.getElementById('checkoutToken').value;
                const headers = {
                    'Content-Type': 'application/json',
                    'Origin': 'http://localhost:5173'
                };
                if (token) {
                    headers['Authorization'] = `Bearer ${token}`;
                }
                
                const response = await fetch(`${API_BASE}/orders`, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify({
                        paymentMethod: document.getElementById('checkoutPayment').value,
                        deliveryInstructions: 'Test order from Burp Suite'
                    })
                });
                const data = await response.json();
                showResponse('checkoutResp', {
                    status: response.status,
                    message: '‚úÖ Check Burp Suite HTTP history for POST /api/orders',
                    data: data
                });
            } catch (error) {
                showResponse('checkoutResp', { error: error.message }, true);
            }
        }

        async function testUpdateProfile() {
            try {
                const token = document.getElementById('profileToken').value;
                if (!token) {
                    showResponse('profileResp', { error: 'Auth token required for profile update' }, true);
                    return;
                }
                
                const response = await fetch(`${API_BASE}/users/me`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`,
                        'Origin': 'http://localhost:5173'
                    },
                    body: JSON.stringify({
                        fullname: document.getElementById('profileFullname').value,
                        phone: document.getElementById('profilePhone').value
                    })
                });
                const data = await response.json();
                showResponse('profileResp', {
                    status: response.status,
                    message: '‚úÖ Check Burp Suite HTTP history for PUT /api/users/me',
                    data: data
                });
            } catch (error) {
                showResponse('profileResp', { error: error.message }, true);
            }
        }

        console.log('üîç Burp Suite test page loaded');
        console.log('üìù Instructions:');
        console.log('   1. Open Burp Suite ‚Üí Proxy ‚Üí HTTP history');
        console.log('   2. Click any test button above');
        console.log('   3. Filter by Method: POST');
        console.log('   4. Click POST request ‚Üí Request tab ‚Üí See credentials');
    </script>
</body>
</html>

